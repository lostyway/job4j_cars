<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Детали объявления</title>
    <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>

<div class="navbar">
    <div class="container">
        <div th:replace="fragments/navigation :: navigation"></div>
    </div>
</div>

<div class="container">
    <div class="card">
        <div class="flex justify-between align-center mb-20">
            <h1>Информация об объявлении</h1>
            <div th:if="${isAdmin}">
                <a th:href="@{/post/update/{id}(id=${post.id})}" class="btn">Редактировать</a>
            </div>
        </div>

        <div class="post-details">
            <div class="post-header">
                <h2 th:text="${post.description}" class="mb-20"></h2>
                <div class="status-badge" th:classappend="${post.sold} ? 'sold' : 'available'">
                    <span th:text="${post.sold} ? 'Продано' : 'В продаже'"></span>
                </div>
            </div>

            <div class="grid two-columns">
                <div class="detail-item">
                    <h3>Основная информация</h3>
                    <p><strong>Цена:</strong> <span th:text="${post.price} + ' ₽'"></span></p>
                    <p><strong>Дата создания:</strong> <span th:text="${#temporals.format(post.created, 'dd.MM.yyyy HH:mm')}"></span></p>
                    <p><strong>Автор:</strong> <span th:text="${post.author.login}"></span></p>
                </div>

                <div class="detail-item">
                    <h3>Характеристики автомобиля</h3>
                    <p><strong>Марка:</strong> <span th:text="${post.car.mark.name}"></span></p>
                    <p><strong>Модель:</strong> <span th:text="${post.car.model.name}"></span></p>
                    <p><strong>Год выпуска:</strong> <span th:text="${post.car.year}"></span></p>
                    <p><strong>Двигатель:</strong> <span th:text="${post.car.engine.name}"></span></p>
                </div>
            </div>

            <div class="detail-item mt-30">
                <h3>Фотографии</h3>
                <div th:if="${#sets.isEmpty(post.photos)}" class="no-photos">
                    <p>Нет фотографий</p>
                </div>

                <div class="img-gallery">
                    <div th:each="photo : ${post.photos}">
                        <img th:src="@{/photo/{id}(id=${photo.id})}" alt="Фото автомобиля" class="gallery-image"/>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-30">
            <a th:href="@{/}" class="btn btn-secondary">Назад к объявлениям</a>
        </div>
    </div>
</div>

<footer class="footer">
    <div class="container">
        <div th:replace="fragments/footer :: footer"></div>
    </div>
</footer>

</body>
</html>