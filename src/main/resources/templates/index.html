<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Объявления</title>
  <link rel="stylesheet" href="/css/styles.css"/>
</head>
<body>

<!-- Навигационное меню -->
<div th:replace="fragments/navigation :: navigation"></div>

<h1>Объявления по продаже машин</h1>

<!-- Ссылка на создание нового объявления -->
<a th:href="@{/post/create}">Новое объявление</a>

<table>
  <thead>
  <tr>
    <th>Фото</th>
    <th>Описание</th>
    <th>Статус</th>
    <th>Машина</th>
    <th>Автор</th>
    <th>Дата публикации</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="post : ${posts}">
    <td>
      <img th:if="${post.photos != null and !post.photos.isEmpty()}"
           th:src="@{/photo/{id}(id=${post.photos.iterator().next().id})}"
           alt="Фото"
           width="150" height="100"/>
      <span th:if="${post.photos == null or post.photos.isEmpty()}">Нет фото</span>
    </td>
    <td>
      <a th:href="@{/post/{id}(id=${post.id})}" th:text="${post.description}"></a>
    </td>
    <td th:text="${post.sold ? 'Продано' : 'В продаже'}"></td>
    <td>
      <div>
        Марка: <span th:text="${post.car.mark.name}"></span><br>
        Модель: <span th:text="${post.car.model.name}"></span><br>
        Год выпуска: <span th:text="${post.car.year}"></span><br>
      </div>
    </td>
    <td th:text="${post.author.login}"></td>
    <td th:text="${#temporals.format(post.created, 'dd.MM.yyyy HH:mm')}"></td>
  </tr>
  </tbody>
</table>

<!-- Футер -->
<footer th:include="fragments/footer :: footer"></footer>

</body>
</html>
